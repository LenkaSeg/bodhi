# Created by pyp2rpm-3.3.7
%global pypi_name bodhi-client
%global pypi_version 5.7.5

Name:           %{pypi_name}
Version:        %{pypi_version}
Release:        0%{?dist}
Summary:        Bodhi client

License:        GPLv2+
URL:            https://github.com/fedora-infra/bodhi
Source0:        %{pypi_name}-%{pypi_version}.tar.gz
BuildArch:      noarch

BuildRequires:  python3-devel
BuildRequires:  make

Obsoletes: python3-bodhi-client <= 5.7.5

%py_provides python3-bodhi-client

%description

%prep
%autosetup -n %{pypi_name}-%{pypi_version}
# Remove bundled egg-info
rm -rf %{pypi_name}.egg-info

%generate_buildrequires
%pyproject_buildrequires


%build
%pyproject_wheel
make %{?_smp_mflags} -C docs man

%install
%pyproject_install
%pyproject_save_files bodhi

%check
%pyproject_check_import

install -d %{buildroot}%{_mandir}/man1
install -pm0644 docs/_build/bodhi.1 %{buildroot}%{_mandir}/man1/

%files -n %{pypi_name} -f %{pyproject_files}
%{_bindir}/bodhi
/usr/lib/python3.10/site-packages/bodhi-complete.sh
%{_mandir}/man1/bodhi.1*
